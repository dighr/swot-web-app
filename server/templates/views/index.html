{# {% import "mixins/flash-messages.html" as FM %} #}

<!DOCTYPE html>
<html lang="en" class="h-100">
	<head>
		{% if gtag %}
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id={{ gtag }}"
		></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag("js", new Date());

			gtag("config", "{{ gtag }}");
		</script>
		{% endif %}

		<title>{{ title|default("Safe Water Optimization Tool") }}</title>

		<script
			src="//code.jquery.com/jquery-3.3.1.min.js"
			crossorigin="anonymous"
		></script>

		<link
			rel="stylesheet"
			href="//stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
			integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
			crossorigin="anonymous"
		/>

		<link href="/styles/site.css" rel="stylesheet" />

		{% if user and user.canAccessKeystone %}
		<link href="/admin/styles/content/editor.min.css" rel="stylesheet" />
		{% endif %}
		<script src="/js/jquery/jquery.form.js"></script>
		<script src="//unpkg.com/bootstrap-table@1.15.3/dist/bootstrap-table.min.js"></script>
		<script src="/js/fa.min.js"></script>
		<script src="/js/modals.js"></script>
		<script>
			let user = null;
			{% if user %}
				user = {{user | dump | safe}};
			{% endif %}
			window.__INITIAL_STATE = { user, gtag: "{{gtag}}", grecaptcha: "{{grecaptcha}}" }
		</script>
	</head>

	<body class="d-flex flex-column h-100">
		{# BODY #}
		<div id="app-container" class="h-100 d-flex flex-column"></div>
		<script src="/js/bundle.js"></script>
	</body>
</html>
